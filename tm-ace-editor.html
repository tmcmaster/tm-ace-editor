<!--
`tm-ace-editor`
Polymer web component to encapsulate the ACE code editor

@demo demo/index.html
-->
<script src="ace/ace.js" type="text/javascript" charset="utf-8"></script>

<dom-module id="tm-ace-editor">
  <template>
    <style>
      :host {
        display: block;
        border:solid red 2px;
        padding:8px;
        background-color: black;
      }
      #editor {
        width:100%;
        height:100%;
      }
      #editor {margin:0px;}
      #aaa {display:none}
    </style>
    <pre id="editor"></pre>
    <div style="display:none">
      <content id="content" select="pre"></content>
    </div>
  </template>

  <script>
    (function(Polymer) {
      Polymer({

        is: 'tm-ace-editor',

        properties: {
          prop1: {
            type: String,
            value: 'tm-ace-editor',
          },
        },
        ready: function() {
          var testString = '<html><head>\n</head><body></body></html>';
          console.log(testString);
          var content = this.getContentChildren('#content')[0];
          var code = content.innerHTML;
          //code = code.replace('&lt;', '<');
          var beautiful = ace.require("ace/ext/beautify");
          this.editor = ace.edit("editor");
          this.editor.setTheme("ace/theme/twilight");
          this.editor.session.setMode("ace/mode/html");
          this.setCode(testString);
        },
        setCode: function(code) {
          console.log(code);
          this.editor.session.setValue(code);
        }
      });
    })(Polymer);
  </script>
</dom-module>
